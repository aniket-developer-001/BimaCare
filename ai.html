<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>AI Suggest - BimaCare</title>

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
<link rel="stylesheet" href="main.css">
  <style>
    *{margin:0;padding:0;box-sizing:border-box;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;}
    body{
      background:#f4f7ff;
      color:#0A1A3C;
      
      padding-bottom:110px;
    }
    a{color:inherit;text-decoration:none;}

    /* ===== Header ===== */
    .topHeader{
    width:100%;
    background:#0A1A3C;
    color:#fff;
    display:flex;
    align-items:center;
    justify-content:space-between;
    padding:14px 16px;
    position:sticky;
    top:0;
    z-index:100;
    border-bottom:1px solid rgba(255,255,255,0.12);
  }
  .topHeader h2{font-size:18px;font-weight:1000;}
  .topHeader a{
    color:#fff;text-decoration:none;
    width:42px;height:42px;border-radius:16px;
    display:flex;align-items:center;justify-content:center;
    background:rgba(255,255,255,0.12);
    border:1px solid rgba(255,255,255,0.14);
  }
    .badge{
      padding:10px 14px;
      border-radius:999px;
      background:linear-gradient(135deg,rgba(37,99,235,0.12),rgba(124,58,237,0.10));
      border:1px solid rgba(37,99,235,0.18);
      font-size:12px;
      font-weight:1100;
      color:#1d4ed8;
      display:flex;
      align-items:center;
      gap:8px;
      white-space:nowrap;
      box-shadow:0 12px 30px rgba(37,99,235,0.12);
    }

    /* ===== Layout ===== */
    .wrap{
      width:100%;
      max-width:580px;
      margin:0 auto;
      display:flex;
      flex-direction:column;
      display: flex;
      overflow-x: scroll;
      gap:14px;
    }

    /* ===== Card ===== */
    .card{
      background:#fff;
     margin-bottom: 8px;
      
    }

    /* ===== Ask Row ===== */
    .askRow{
      display:flex;
      gap:10px;
      align-items:center;
    }

    .askBox{
      flex:1;
      display:flex;
      align-items:center;
      gap:10px;
      padding:13px 14px;
      border-radius:18px;
      background: white;
      border:1px solid rgba(0,0,0,0.06);
    }
    .askBox i{font-size:16px;opacity:.85;}
    .askBox input{
      width:100%;
      border:none;
      outline:none;
      background:transparent;
      font-size:14px;
      font-weight:1100;
      color:#0A1A3C;
    }

    .sendBtn{
      border:none;
      outline:none;
      cursor:pointer;
      padding:14px 14px;
      border-radius:18px;
      font-size:13px;
      font-weight:1200;
      color:#fff;
      background:linear-gradient(135deg,#2563eb,#7c3aed);
      box-shadow:0 16px 40px rgba(37,99,235,0.25);
      transition:.2s ease;
      display:flex;
      align-items:center;
      gap:8px;
      white-space:nowrap;
    }
    .sendBtn:active{transform:scale(.98);}
    .sendBtn:disabled{opacity:.6;cursor:not-allowed;}

    /* ===== Chips ===== */
    .chips{
  display:flex;
  gap:12px;
  overflow-x:auto;
  padding:3px 4px;         /* ‚úÖ top-bottom spacing */
  margin-bottom:5px;
  scroll-behavior:smooth;
}

/* hide scrollbar */
.chips::-webkit-scrollbar{
  height:0px;
}

.chip{
  padding:8px 10px;       /* ‚úÖ FIX: top-bottom padding increased */
  border-radius:999px;
  background: white;
  border:1px solid rgba(0,0,0,0.10);
  font-size:13px;
  font-weight:1100;
  color:#0A1A3C;
  cursor:pointer;
  transition:.2s ease;
  display:flex;
  align-items:center;
  gap:10px;
  user-select:none;
  white-space:nowrap;      /* ‚úÖ chip text break hobe na */
  flex-shrink:0;           /* ‚úÖ scroll e thik thakbe */
  
}

.chip:active{
  transform:scale(.97);
}
    .chip i{color:#2563eb;}
    .chip:active{transform:scale(.98);}

    /* ===== Chat ===== */
    .chatWrap{
      padding:10px 10px 0 10px;
    }
    .chatBox{
      display:flex;
      flex-direction:column;
      gap:12px;
      padding-bottom:10px;
    }

    .msg{
      display:flex;
      gap:10px;
      align-items:flex-end;
    }
    .msg.user{justify-content:flex-end;}
    .bubble{
      max-width:86%;
      padding:12px 12px;
      border-radius:18px;
      font-size:13px;
      font-weight:1000;
      line-height:1.55;
      border:1px solid rgba(0,0,0,0.06);
      box-shadow:0 10px 25px rgba(0,0,0,0.05);
      white-space:pre-line;
      position:relative;
    }

    .user .bubble{
      background:linear-gradient(135deg,#2563eb,#7c3aed);
      color:#fff;
      border:none;
    }
    .ai .bubble{
      background:#fff;
      color:#0A1A3C;
    }

    .avatar{
      width:42px;height:42px;
      border-radius:16px;
      display:flex;
      align-items:center;
      justify-content:center;
      border:1px solid rgba(0,0,0,0.06);
      background:#f8fafc;
      flex-shrink:0;
    }
    .ai .avatar{
      background:rgba(37,99,235,0.10);
      border:1px solid rgba(37,99,235,0.18);
    }
    .ai .avatar i{color:#2563eb;font-size:16px;}
    .user .avatar{display:none;}

    .meta{
      margin-top:7px;
      font-size:11px;
      font-weight:900;
      opacity:.75;
    }

    .bubbleActions{
      display:flex;
      gap:8px;
      margin-top:10px;
    }
    .miniBtn{
      border:none;
      cursor:pointer;
      padding:9px 10px;
      border-radius:14px;
      font-size:12px;
      font-weight:1100;
      background:#f8fafc;
      border:1px solid rgba(0,0,0,0.06);
      display:flex;
      align-items:center;
      gap:8px;
      transition:.2s ease;
    }
    .miniBtn:active{transform:scale(.98);}
    .miniBtn i{color:#2563eb;}

    /* ===== Typing ===== */
    .typing{
      display:flex;
      align-items:center;
      gap:10px;
    }
    .dots{
      display:flex;
      gap:6px;
      padding:12px 12px;
      border-radius:18px;
      background:#fff;
      border:1px solid rgba(0,0,0,0.06);
      box-shadow:0 10px 25px rgba(0,0,0,0.05);
    }
    .dot{
      width:8px;height:8px;border-radius:50%;
      background:#2563eb;
      opacity:.35;
      animation: blink 1.2s infinite;
    }
    .dot:nth-child(2){animation-delay:.2s;}
    .dot:nth-child(3){animation-delay:.4s;}
    @keyframes blink{
      0%,100%{opacity:.25;transform:translateY(0);}
      50%{opacity:1;transform:translateY(-3px);}
    }

    /* ===== Empty ===== */
    .empty{
      text-align:center;
      padding:18px 10px;
      color:#64748b;
      font-weight:1000;
      font-size:13px;
      line-height:1.7;
    }

    /* ===== Bottom Row ===== */
    .bottomRow{
      position:fixed;
      left:0;right:0;bottom:0;
      padding:6px 14px 12px 14px;
      background:rgba(244,247,255,0.92);
      backdrop-filter: blur(12px);
      border-top:1px solid rgba(0,0,0,0.06);
      z-index:99;
    }
    .bottomInner{
      width:100%;
      max-width:580px;
      margin:0 auto;
      display:flex;
      gap:10px;
    }

    .clearBtn{
      flex:1;
      border:none;
      cursor:pointer;
      padding:14px 14px;
      border-radius:18px;
      font-size:13px;
      font-weight:1200;
      background:#0f172a;
      color:#fff;
      display:flex;
      align-items:center;
      justify-content:center;
      gap:10px;
      box-shadow:0 16px 40px rgba(15,23,42,0.18);
      transition:.2s ease;
    }
    .clearBtn:active{transform:scale(.98);}

    /* ===== Popup ===== */
    .popupOverlay{
      position:fixed;
      inset:0;
      background:rgba(0,0,0,0.35);
      display:none;
      align-items:center;
      justify-content:center;
      padding:18px;
      z-index:999;
    }
    .popup{
      width:100%;
      max-width:420px;
      background:#fff;
      border-radius:24px;
      border:1px solid rgba(0,0,0,0.08);
      box-shadow:0 30px 80px rgba(0,0,0,0.25);
      padding:16px;
      animation: pop .18s ease;
    }
    @keyframes pop{
      from{transform:scale(.96);opacity:.7;}
      to{transform:scale(1);opacity:1;}
    }
    .popupTop{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:12px;
    }
    .popupTop h3{
      font-size:14px;
      font-weight:1200;
    }
    .popupTop p{
      font-size:12px;
      font-weight:900;
      color:#64748b;
      margin-top:4px;
      line-height:1.5;
    }
    .closePop{
      width:42px;height:42px;
      border-radius:16px;
      border:1px solid rgba(0,0,0,0.06);
      background:#f8fafc;
      cursor:pointer;
      display:flex;
      align-items:center;
      justify-content:center;
      transition:.2s ease;
    }
    .closePop:active{transform:scale(.96);}

    .popupBtns{
      display:flex;
      gap:10px;
      margin-top:14px;
    }
    .pBtn{
      flex:1;
      border:none;
      cursor:pointer;
      padding:13px 14px;
      border-radius:18px;
      font-size:13px;
      font-weight:1200;
      transition:.2s ease;
      display:flex;
      align-items:center;
      justify-content:center;
      gap:10px;
    }
    .pBtn:active{transform:scale(.98);}
    .pBtn.gray{
      background:#f8fafc;
      border:1px solid rgba(0,0,0,0.06);
      color:#0A1A3C;
    }
    .pBtn.red{
      background:linear-gradient(135deg,#ef4444,#dc2626);
      color:#fff;
      box-shadow:0 16px 40px rgba(239,68,68,0.20);
    }
  </style>
</head>

<body>

  <!-- Header -->
    <header class="topHeader">
    <a href="https://aniket-developer-001.github.io/BimaCare/home.html"><i class="fa-solid fa-arrow-left"></i></a>
    <h2>Ai Suggest</h2>
    <a href="#" id="clearBtn" title="Logout" onclick="closePopup()"><i class="fa fa-trash"></i></a>
  </header>


    <!-- Ask -->
    

    <!-- Chat -->
    <div class="card chatWrap">
      <div class="chatBox" id="chatBox"></div>

      <!-- typing indicator -->
      <div class="typing" id="typing" style="display:none;margin-top:12px;">
        <div class="avatar"><i class="fa-solid fa-wand-magic-sparkles"></i></div>
        <div class="dots">
          <div class="dot"></div>
          <div class="dot"></div>
          <div class="dot"></div>
        </div>
      </div>
    </div>

  </div>

  <!-- Bottom -->
  <div class="bottomRow">
    

      <!-- Chips -->
      <div class="chips">
        <div class="chip" onclick="chipAsk('Which insurance is best for family?')">
          <i class="fa-solid fa-people-roof"></i> Family
        </div>
        <div class="chip" onclick="chipAsk('How to improve CIBIL score fast?')">
          <i class="fa-solid fa-gauge-high"></i> CIBIL
        </div>
        <div class="chip" onclick="chipAsk('Explain Term insurance in simple words')">
          <i class="fa-solid fa-shield-heart"></i> Term
        </div>
        <div class="chip" onclick="chipAsk('How to claim insurance?')">
          <i class="fa-solid fa-file-circle-check"></i> Claim
        </div>
        <div class="chip" onclick="chipAsk('Suggest health insurance for parents')">
          <i class="fa-solid fa-hospital"></i> Parents
        </div>
        <div class="chip" onclick="chipAsk('Best investment: SIP or Endowment?')">
          <i class="fa-solid fa-scale-balanced"></i> SIP vs Policy
        </div>
      </div>
    <div class="askRow">
  <div class="askBox">
    <i class="fa-solid fa-magnifying-glass"></i>
    <input id="query" type="text" placeholder="Ask: Best term plan for family?" />
  </div>
  
  <button class="sendBtn" id="sendBtn">
    <i class="fa-solid fa-paper-plane"></i> Ask
  </button>
</div>
  </div>

  <!-- Popup -->
  <div class="popupOverlay" id="popupOverlay">
    <div class="popup">
      <div class="popupTop">
        <div>
          <h3 id="popTitle">Popup</h3>
          <p id="popDesc">Message</p>
        </div>
      </div>

      <div class="popupBtns" id="popBtns"></div>
    </div>
  </div>

<script>
/* ===========================
   SIMPLE DARK MODE LOADER
   =========================== */

const THEME_KEY = "dark_mode"; // localStorage key

function loadThemeFromStorage() {
  const mode = localStorage.getItem(THEME_KEY);
  
  if (mode === "yes") {
    document.body.classList.add("dark");
  } else {
    document.body.classList.remove("dark");
  }
}

/* Run when page loads */
document.addEventListener("DOMContentLoaded", loadThemeFromStorage);
  const query = document.getElementById("query");
  const sendBtn = document.getElementById("sendBtn");
  const chatBox = document.getElementById("chatBox");
  const clearBtn = document.getElementById("clearBtn");
  const typing = document.getElementById("typing");

  const popOverlay = document.getElementById("popupOverlay");
  const popTitle = document.getElementById("popTitle");
  const popDesc = document.getElementById("popDesc");
  const popBtns = document.getElementById("popBtns");

  const STORAGE_KEY = "bimaBondhu_ai_chat_v2";

  /* ===== Popup System (No alert/confirm) ===== */
  function openPopup(title, desc, buttons = []){
    popTitle.textContent = title;
    popDesc.textContent = desc;

    popBtns.innerHTML = buttons.map(b => `
      <button class="pBtn ${b.type || "gray"}" onclick="${b.action}">
        ${b.icon ? `<i class="fa-solid ${b.icon}"></i>` : ""} ${b.text}
      </button>
    `).join("");

    popOverlay.style.display = "flex";
  }
  function closePopup(){
    popOverlay.style.display = "none";
  }
  popOverlay.addEventListener("click", (e)=>{
    if(e.target === popOverlay) closePopup();
  });

  function nowTime(){
    return new Date().toLocaleString("en-IN", {
      day:"2-digit", month:"short",
      hour:"2-digit", minute:"2-digit"
    });
  }

  function escapeHtml(text){
    return text
      .replaceAll("&","&amp;")
      .replaceAll("<","&lt;")
      .replaceAll(">","&gt;")
      .replaceAll('"',"&quot;")
      .replaceAll("'","&#039;");
  }

  function getChat(){
    return JSON.parse(localStorage.getItem(STORAGE_KEY) || "[]");
  }

  function saveChat(data){
    localStorage.setItem(STORAGE_KEY, JSON.stringify(data));
  }

  function addMessage(role, text){
    const data = getChat();
    data.push({ role, text, time: nowTime() });
    saveChat(data);
    renderChat();
  }

  function copyText(text){
    navigator.clipboard.writeText(text).then(()=>{
      openPopup("Copied!", "AI answer copied successfully.", [
        {text:"OK", type:"gray", icon:"fa-check", action:"closePopup()"}
      ]);
    });
  }

  function renderChat(){
    const data = getChat();

    if(data.length === 0){
      chatBox.innerHTML = `
        <div class="empty">
          <i class="fa-solid fa-robot" style="font-size:24px;color:#2563eb;"></i><br><br>
          Ask anything like:<br>
          <b>‚ÄúBest term insurance for family?‚Äù</b><br>
          <b>‚ÄúHow to improve CIBIL fast?‚Äù</b><br>
          <b>‚ÄúClaim process step by step‚Äù</b>
        </div>
      `;
      return;
    }

    chatBox.innerHTML = data.map(m=>{
      const safe = escapeHtml(m.text);

      if(m.role === "user"){
        return `
          <div class="msg user">
            <div class="bubble">
              ${safe}
              <div class="meta">${m.time}</div>
            </div>
          </div>
        `;
      }else{
        return `
          <div class="msg ai">
            <div class="avatar"><i class="fa-solid fa-wand-magic-sparkles"></i></div>
            <div class="bubble">
              ${safe}
              <div class="bubbleActions">
                <button class="miniBtn" onclick="copyText(${JSON.stringify(m.text)})">
                  <i class="fa-solid fa-copy"></i> Copy
                </button>
              </div>
              <div class="meta">${m.time}</div>
            </div>
          </div>
        `;
      }
    }).join("");

    window.scrollTo({ top: document.body.scrollHeight, behavior: "smooth" });
  }

  /* ===== AI Smart Rules ===== */
  function getAIAnswer(q) {
  const t = q.toLowerCase().trim();
  
  // Helper: quick keyword check
  const has = (...words) => words.some(w => t.includes(w));
  
  /* ===============================
     1) Greetings / Intro
  =============================== */
  if (
    t === "hi" || t === "hello" || t === "hey" ||
    has("hii", "hlw", "hey bro", "good morning", "good afternoon", "good evening", "namaste", "‡¶π‡¶æ‡¶á", "‡¶π‡ßç‡¶Ø‡¶æ‡¶≤‡ßã")
  ) {
    return `Hello üëã\nI‚Äôm BimaCare AI ü§ñ‚ú®\n\nYou can ask me about:\n‚úÖ LIC Plans\n‚úÖ Insurance (Term / Health / Vehicle)\n‚úÖ CIBIL Score\n‚úÖ EMI & Loan\n‚úÖ Claims & Policy Process\n\nType like:\n‚Ä¢ "LIC best plan"\n‚Ä¢ "Term insurance"\n‚Ä¢ "How to improve cibil"\n‚Ä¢ "EMI calculation"`;
  }
  
  /* ===============================
     2) Help / Commands
  =============================== */
  if (has("help", "commands", "what can you do", "menu", "options", "support")) {
    return `üìå Available Commands (Ask anything like)\n\nüõ°Ô∏è Insurance:\n‚Ä¢ term insurance\n‚Ä¢ health insurance\n‚Ä¢ car insurance\n‚Ä¢ ulip / endowment / moneyback\n\nüèõÔ∏è LIC:\n‚Ä¢ lic plans list\n‚Ä¢ lic maturity\n‚Ä¢ lic surrender value\n‚Ä¢ lic loan\n‚Ä¢ lic premium\n\nüí≥ CIBIL:\n‚Ä¢ cibil score improve\n‚Ä¢ low cibil solution\n\nüí∞ Loan/EMI:\n‚Ä¢ emi tips\n‚Ä¢ loan interest\n\nüßæ Claims:\n‚Ä¢ claim process\n‚Ä¢ documents for claim\n\nType your question now üôÇ`;
  }
  
  /* ===============================
     3) CIBIL / Credit Score
  =============================== */
  if (has("cibil", "credit score", "score", "crif", "experian", "equifax", "credit", "‡¶∏‡¶ø‡¶¨‡¶ø‡¶≤", "‡¶ï‡ßç‡¶∞‡ßá‡¶°‡¶ø‡¶ü")) {
    return `‚úÖ CIBIL Score Improvement (Best Tips)\n\n‚≠ê Best Score Range:\n740+ = Excellent\n700‚Äì739 = Good\n650‚Äì699 = Average\nBelow 650 = Needs Improvement\n\nüî• 10 Powerful Tips:\n1) Pay EMI & credit card bills on time\n2) Keep credit usage below 30%\n3) Don‚Äôt apply too many loans at once\n4) Maintain 1‚Äì2 old credit accounts\n5) Never miss minimum due\n6) Avoid BNPL / PayLater overuse\n7) Pay overdue immediately\n8) Keep loan tenure balanced\n9) Check report for errors\n10) Use secured card if score is very low\n\nIf you tell me your score + age, I can guide you personally.`;
  }
  
  /* ===============================
     4) Health Insurance
  =============================== */
  if (has("health", "hospital", "medical", "cashless", "mediclaim", "surgery", "treatment", "‡¶°‡¶æ‡¶ï‡ßç‡¶§‡¶æ‡¶∞", "‡¶π‡¶æ‡¶∏‡¶™‡¶æ‡¶§‡¶æ‡¶≤")) {
    return `üè• Health Insurance Suggestion\n\n‚úÖ Best for most families:\n‚Ä¢ Family Floater (Self + Wife + Kids)\n‚Ä¢ Separate plan for Parents\n\n‚≠ê Must Check Before Buying:\n1) Sum insured (5L / 10L / 20L)\n2) Room rent limit\n3) Waiting period\n4) Cashless hospital network\n5) Pre-existing disease coverage\n6) Claim settlement ratio\n7) No-claim bonus\n8) Co-payment\n\nüî• Best combo:\nBase Plan + Super Top-Up\n\nTell me your age + family members for best suggestion.`;
  }
  
  /* ===============================
     5) Term Insurance
  =============================== */
  if (has("term", "life cover", "death cover", "pure protection", "family protection", "life insurance", "term plan", "‡¶ü‡¶æ‡¶∞‡ßç‡¶Æ")) {
    return `üõ°Ô∏è Term Insurance (Simple & Best)\n\n‚úî Pure protection plan\n‚úî Very high coverage\n‚úî Premium is low\n‚úî No maturity (usually)\n\n‚≠ê Best for:\n‚Ä¢ Family protection\n‚Ä¢ Loan protection\n‚Ä¢ Future security\n\nüî• Best rule:\nCover = 10x to 20x yearly income\n\nüìå Tip:\nAlways choose claim-friendly company + add accidental rider if needed.`;
  }
  
  /* ===============================
     6) ULIP
  =============================== */
  if (has("ulip", "unit linked", "market linked", "equity linked")) {
    return `üìå ULIP (Truth & Suggestion)\n\n‚úî Insurance + Investment\n‚úî Lock-in: 5 years\n‚úî Returns depend on market\n‚úî Charges are higher in early years\n\n‚≠ê Best for:\n‚Ä¢ Long-term investors (10+ years)\n\n‚ö†Ô∏è For most people:\nSIP + Term Insurance = better & flexible.\n\nIf you tell me your goal (savings / wealth / protection), I‚Äôll guide you best.`;
  }
  
  /* ===============================
     7) Endowment / Moneyback
  =============================== */
  if (has("endowment", "moneyback", "money back", "guaranteed plan", "savings plan", "return plan")) {
    return `üí∞ Endowment / Moneyback Plan\n\n‚úî Insurance + Savings\n‚úî Premium higher than term\n‚úî Returns moderate\n‚úî Bonus depends on company\n\n‚≠ê Good for:\n‚Ä¢ People who want forced savings\n‚Ä¢ Low risk savers\n\nüìå Tip:\nAlways compare with:\n‚Ä¢ FD + Term\n‚Ä¢ SIP + Term\n\nIf you tell me your age + monthly saving amount, I can suggest best.`;
  }
  
  /* ===============================
     8) Vehicle / Motor Insurance
  =============================== */
  if (has("car", "bike", "motor", "vehicle", "third party", "own damage", "zero dep", "accident")) {
    return `üöó Vehicle Insurance (Motor)\n\n‚úÖ Types:\n1) Third Party (mandatory)\n2) Comprehensive (best)\n3) Own Damage\n\n‚≠ê Best Add-ons:\n‚Ä¢ Zero Depreciation\n‚Ä¢ Engine Protect\n‚Ä¢ RSA (Road Side Assistance)\n‚Ä¢ Return to Invoice\n\nüìå Tip:\nAlways compare premium + claim reviews before buying.`;
  }
  
  /* ===============================
     9) Claim Process (All)
  =============================== */
  if (has("claim", "policy claim", "insurance claim", "death claim", "hospital claim", "accident claim")) {
    return `‚úÖ Insurance Claim Process (Step by Step)\n\n1) Inform company within 24 hours\n2) Collect documents (policy, ID, bills)\n3) Fill claim form\n4) Verification / Survey\n5) Approval & payout\n\nüìå Common Required Documents:\n‚Ä¢ Policy copy\n‚Ä¢ Aadhaar / PAN\n‚Ä¢ Bank details\n‚Ä¢ Hospital bills / death certificate\n‚Ä¢ Nominee ID proof\n\nTip: Keep nominee updated + policy number saved.`;
  }
  
  /* ===============================
     10) Claim Rejected / Delay
  =============================== */
  if (has("claim rejected", "claim denied", "claim pending", "delay", "not approved", "rejection")) {
    return `‚ö†Ô∏è Claim Rejected / Delayed? (What to do)\n\n‚úÖ Common reasons:\n1) Wrong documents\n2) Waiting period not completed\n3) Non-disclosure (health history)\n4) Policy lapse\n5) Incorrect nominee / bank details\n\n‚úÖ Best solution:\n1) Ask for written rejection reason\n2) Submit missing documents\n3) Escalate to grievance cell\n4) If still not solved ‚Üí IRDAI complaint\n\nIf you tell me claim type (health/term/vehicle), I can guide step-by-step.`;
  }
  
  /* ===============================
     11) EMI / Loan
  =============================== */
  if (has("emi", "loan", "interest", "home loan", "personal loan", "car loan", "education loan", "emi calculation")) {
    return `üìå EMI & Loan Smart Guide\n\n‚úÖ Golden Rule:\nEMI should be under 30% of monthly income.\n\n‚≠ê Smart Tips:\n1) Compare interest rate + processing fee\n2) Keep tenure balanced\n3) Prepay whenever possible\n4) Avoid multiple loans at once\n5) Keep CIBIL above 740\n\nüìå EMI Formula:\nEMI = [P√óR√ó(1+R)^N] / [(1+R)^N ‚àí 1]\n\nTell me loan amount + rate + years, I can calculate EMI.`;
  }
  
  /* ===============================
     12) Loan Eligibility
  =============================== */
  if (has("loan eligibility", "how much loan", "loan approve", "loan approval", "eligible")) {
    return `‚úÖ Loan Eligibility (Simple)\n\nBanks check:\n1) Monthly income\n2) Job/business stability\n3) CIBIL score\n4) Existing EMI\n5) Age\n\n‚≠ê Quick estimate:\nIf your monthly income = ‚Çπ30,000\nSafe EMI = ‚Çπ9,000 (30%)\n\nTell me your income + existing EMI + CIBIL, I‚Äôll estimate your loan range.`;
  }
  
  /* ===============================
     13) LIC Plans (General)
  =============================== */
  if (has("lic", "life insurance corporation")) {
    return `üèõÔ∏è LIC Guide\n\nLIC is trusted for:\n‚úÖ Traditional savings plans\n‚úÖ Guaranteed style returns\n‚úÖ Strong long-term brand\n\nBut for pure protection:\nüõ°Ô∏è Term Insurance is best (low premium, high cover)\n\nYou can ask:\n‚Ä¢ "LIC best plan"\n‚Ä¢ "LIC moneyback"\n‚Ä¢ "LIC term plan"\n‚Ä¢ "LIC surrender value"\n‚Ä¢ "LIC loan on policy"\n‚Ä¢ "LIC premium payment"`;
  }
  
  /* ===============================
     14) LIC Plans List
  =============================== */
  if (has("lic plans list", "lic plan list", "all lic plans", "lic all plans", "lic policy list")) {
    return `üìå LIC Popular Plans List (India)\n\nüõ°Ô∏è Term Plans:\n‚Ä¢ LIC Tech Term\n\nüí∞ Savings / Endowment:\n‚Ä¢ LIC Jeevan Anand\n‚Ä¢ LIC Jeevan Lakshya\n‚Ä¢ LIC Jeevan Labh\n‚Ä¢ LIC New Endowment\n\nüí∏ Moneyback:\n‚Ä¢ LIC New Money Back (20 Years)\n‚Ä¢ LIC New Money Back (25 Years)\n\nüë∂ Child Plans:\n‚Ä¢ LIC Jeevan Tarun\n\nüë¥ Pension Plans:\n‚Ä¢ LIC Jeevan Akshay\n‚Ä¢ LIC Saral Pension\n\nIf you tell me your age + goal, I will suggest the best LIC plan.`;
  }
  
  /* ===============================
     15) LIC Premium / Payment
  =============================== */
  if (has("premium", "pay premium", "payment", "due", "lic premium", "installment", "renewal")) {
    return `üí≥ Premium Payment Guide\n\n‚úÖ You can pay premium via:\n1) LIC Official Website\n2) LIC Mobile App\n3) UPI / Netbanking\n4) LIC Branch\n5) Agent\n\n‚≠ê Important:\n‚Ä¢ Always pay before due date\n‚Ä¢ Keep receipt screenshot saved\n\nIf you tell me policy type, I can tell exact best payment method.`;
  }
  
  /* ===============================
     16) Policy Lapse / Revival
  =============================== */
  if (has("lapse", "revive", "revival", "policy stopped", "policy closed", "premium not paid")) {
    return `‚ö†Ô∏è Policy Lapse / Revival Guide\n\nIf premium not paid on time ‚Üí policy may lapse.\n\n‚úÖ Revival possible if:\n‚Ä¢ Within revival period (usually 2‚Äì5 years)\n\n‚≠ê Steps:\n1) Pay pending premium\n2) Pay late fee/interest\n3) Submit revival form\n4) Medical test (sometimes)\n\nTip: Revival early = cheaper & easier.`;
  }
  
  /* ===============================
     17) Grace Period
  =============================== */
  if (has("grace period", "late payment", "after due date", "premium late")) {
    return `‚è≥ Grace Period (Important)\n\nMost insurance policies provide:\n‚úÖ 15 to 30 days grace period\n\nDuring grace period:\n‚úî Policy remains active\n‚úî You can pay without lapse\n\nTip: Always pay within grace to avoid revival process.`;
  }
  
  /* ===============================
     18) Surrender Value
  =============================== */
  if (has("surrender", "surrender value", "close policy", "policy break", "stop policy")) {
    return `üí∏ Surrender Value (Policy Close)\n\nSurrender means you close policy before maturity.\n\n‚ö†Ô∏è Important:\n‚Ä¢ Most policies give surrender value after 2‚Äì3 years\n‚Ä¢ Early surrender gives low returns\n\n‚≠ê Best tip:\nBefore surrender, check:\n1) Paid-up value\n2) Loan on policy option\n3) Revival option\n\nIf you tell me policy years + premium, I can estimate.`;
  }
  
  /* ===============================
     19) Loan on Policy
  =============================== */
  if (has("loan on policy", "policy loan", "loan against policy", "lic loan")) {
    return `üè¶ Loan Against Policy (LIC)\n\n‚úÖ You can take loan if:\n‚Ä¢ Policy has surrender value\n‚Ä¢ Premium paid for minimum years\n\n‚≠ê Benefits:\n‚úî Quick loan\n‚úî Low interest\n‚úî No CIBIL impact (mostly)\n\n‚ö†Ô∏è If loan not paid:\nIt can reduce maturity amount.\n\nTell me your policy years & type, I‚Äôll guide.`;
  }
  
  /* ===============================
     20) Maturity Amount / Bonus
  =============================== */
  if (has("maturity", "maturity amount", "bonus", "final amount", "returns", "policy return")) {
    return `üí∞ Maturity Amount / Bonus (LIC)\n\nMaturity depends on:\n1) Sum Assured\n2) Policy term\n3) Bonus rate\n4) Final additional bonus\n\n‚ö†Ô∏è Important:\nLIC traditional plans give:\n‚úÖ Stable returns\n‚ùå Not high returns like stock market\n\nIf you tell me:\n‚Ä¢ Policy name\n‚Ä¢ Premium\n‚Ä¢ Term\nI can explain expected maturity.`;
  }
  
  /* ===============================
     21) Riders
  =============================== */
  if (has("rider", "accidental rider", "critical illness", "waiver", "add-on")) {
    return `üß© Insurance Riders (Add-ons)\n\n‚≠ê Most useful riders:\n1) Accidental Death Benefit\n2) Accidental Disability\n3) Critical Illness\n4) Premium Waiver\n\nTip:\nRiders are good only if premium is affordable.\n\nTell me your plan type, I can suggest best rider.`;
  }
  
  /* ===============================
     22) GST / Tax
  =============================== */
  if (has("gst", "tax", "80c", "tax benefit", "income tax")) {
    return `üßæ Insurance Tax & GST Info\n\n‚úÖ Income Tax Benefits:\n‚Ä¢ Section 80C (premium deduction)\n‚Ä¢ Section 10(10D) (maturity benefit in many cases)\n\n‚úÖ GST:\n‚Ä¢ Insurance premium includes GST\n\n‚ö†Ô∏è Note:\nTax rules depend on policy type.\n\nTell me your plan name, I‚Äôll guide properly.`;
  }
  
  /* ===============================
     23) Best Insurance Suggestion
  =============================== */
  if (has("best insurance", "which insurance", "suggest insurance", "best plan", "recommend", "kon plan", "best lic")) {
    return `‚úÖ Best Insurance depends on your goal:\n\nüë®‚Äçüë©‚Äçüëß‚Äçüë¶ Family Protection ‚Üí Term Insurance\nüè• Medical safety ‚Üí Health Insurance\nüöó Vehicle ‚Üí Motor Insurance\nüí∞ Savings ‚Üí SIP + Term\nüèõÔ∏è LIC Savings ‚Üí Endowment/Moneyback\n\n‚≠ê Most powerful combo for 90% people:\nTerm + Health\n\nTell me:\n1) Age\n2) Monthly income\n3) Goal (Protection / Savings / Health)\nThen I will suggest the best.`;
  }
  
  /* ===============================
     24) Contact / Agent / Branch
  =============================== */
  if (has("agent", "branch", "lic office", "near me", "customer care", "helpline")) {
    return `üìç LIC Branch / Agent Help\n\nYou can get support via:\n‚úÖ LIC Official Website\n‚úÖ LIC Mobile App\n‚úÖ Nearest LIC Branch\n‚úÖ LIC Customer Care\n\nTip:\nAlways keep your policy number & registered phone number ready.`;
  }
  
  /* ===============================
     25) Free-look cancellation
  =============================== */
  if (has("free look", "cancel policy", "policy cancel", "refund", "return policy")) {
    return `üîÅ Free-Look Period (Policy Cancel)\n\nMost policies allow cancellation within:\n‚úÖ 15 days (offline)\n‚úÖ 30 days (online)\n\nYou can get refund after deductions.\n\nTip:\nCancel early if policy is wrong.`;
  }
  
  /* ===============================
     26) Hindi/Bengali Quick Triggers
  =============================== */
  if (has("bima", "bimaCare", "insurance kya", "lic kya", "emi kya", "loan kya", "policy")) {
    return `ü§ñ BimaCare AI Here!\n\nAap puch sakte ho:\n‚úÖ LIC Plans\n‚úÖ Term Insurance\n‚úÖ Health Insurance\n‚úÖ EMI / Loan\n‚úÖ CIBIL\n‚úÖ Claim process\n\n‡§¨‡§∏ ‡§Ö‡§™‡§®‡§æ ‡§∏‡§µ‡§æ‡§≤ ‡§≤‡§ø‡§ñ‡•ã üôÇ`;
  }
  
  /* ===============================
     Default Response
  =============================== */
  return `ü§ñ I understood your question.\n\nTo give you the best suggestion, please tell me:\n1) Your Age\n2) Monthly Income\n3) Goal (Protection / Savings / Health)\n\nThen I will suggest the best option.`;
}

  /* ===== Ask System ===== */
  function ask(){
    const q = query.value.trim();

    if(q.length < 2){
      openPopup("Write something", "Please type your question to ask AI.", [
        {text:"OK", type:"gray", icon:"fa-check", action:"closePopup()"}
      ]);
      return;
    }

    addMessage("user", q);
    query.value = "";

    sendBtn.disabled = true;
    typing.style.display = "flex";

    setTimeout(()=>{
      const ans = getAIAnswer(q);
      typing.style.display = "none";
      sendBtn.disabled = false;
      addMessage("ai", ans);
    }, 600);
  }

  sendBtn.addEventListener("click", ask);

  query.addEventListener("keydown", (e)=>{
    if(e.key === "Enter"){
      ask();
    }
  });

  function chipAsk(text){
    query.value = text;
    ask();
  }

  /* ===== Clear Chat ===== */
  clearBtn.addEventListener("click", ()=>{
    openPopup(
      "Clear Chat?",
      "This will delete all saved AI chat history from this device.",
      [
        {text:"Cancel", type:"gray", icon:"fa-xmark", action:"closePopup()"},
        {text:"Clear", type:"red", icon:"fa-trash", action:"doClearChat()"}
      ]
    );
  });

  function doClearChat(){
    localStorage.removeItem(STORAGE_KEY);
    closePopup();
    renderChat();
  }

  // Init
  renderChat();
  
</script>
</body>
</html>